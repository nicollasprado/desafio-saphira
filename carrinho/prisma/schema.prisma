generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id String @id @default(uuid())
  username String @unique
  password String
  cart Cart?
}

model Product {
  id String @id @default(uuid())
  name String @unique
  price Int
  image_url String

  @@map("product")
}

model Cart {
  id String @id @default(uuid())
  subtotal Int
  total Int
  cartItems CartItem[]
  owner User @relation(fields: [ownerId], references: [id], onDelete: Cascade)
  ownerId String @map("owner_id") @unique

  @@map("cart")
}

model CartItem {
  id String @id @default(uuid())
  cart Cart @relation(fields: [cartId], references: [id], onDelete: Cascade)
  cartId String @map("cart_id")
  productId String @map("product_id")
  quantity Int

  @@unique([cartId, productId])
  @@map("product_id")
}