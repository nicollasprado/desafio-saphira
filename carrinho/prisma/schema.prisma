generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id       String @id @default(uuid())
  username String @unique
  password String
  cart     Cart?
}

model Product {
  id        String     @id @default(uuid())
  name      String     @unique
  price     Int
  image_url String
  cartItens CartItem[]

  @@map("product")
}

model Cart {
  id        String     @id @default(uuid())
  subtotal  Int
  total     Int
  cartItems CartItem[]
  owner     User       @relation(fields: [ownerId], references: [id], onDelete: Cascade)
  ownerId   String     @unique @map("owner_id")

  @@map("cart")
}

model CartItem {
  id        String  @id @default(uuid())
  cart      Cart    @relation(fields: [cartId], references: [id], onDelete: Cascade)
  cartId    String  @map("cart_id")
  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)
  productId String  @map("product_id")
  quantity  Int

  @@unique([cartId, productId])
  @@map("product_id")
}
